<div class="container-fluid my-3">
    <mat-accordion>
        <mat-expansion-panel [expanded]="currentStep === 0" (opened)="setStep(0)">
            <mat-expansion-panel-header>
                <mat-panel-title> Items Purchased </mat-panel-title>
            </mat-expansion-panel-header>
            <div>
                <form [formGroup]="goldPurchaseForm" (ngSubmit)="save()">
                    <div class="row">
                        <div class="col-sm-6 col-md-3 my-2">
                            <input type="text" class="form-control" id="goldRate" formControlName="goldRate" placeholder="Today's Gold Rate"/>
                        </div>
                    </div>
                    <div formArrayName="items">
                        @for (item of items.controls; track $index) {
                            <div formGroupName="{{$index}}" >
                                <div class="form-group row">
                                    <div class="col-sm-6 col-md-3 my-2">
                                        <input type="text" class="form-control" id="itemPurchase" formControlName="itemPurchase" placeholder="Item Purchase"/>
                                    </div>
                                    <div class="col-sm-6 col-md-3 my-2">
                                        <input type="text" class="form-control" id="HUID_number" formControlName="HUID" placeholder="HUID Number"/>
                                    </div>
                                    <div class="col-sm-6 col-md-3 my-2">
                                        <input type="text" class="form-control" id="weight" formControlName="weight" placeholder="Item weight" (change)="calculatePrice()"/>
                                    </div>
                                    <div class="col-sm-6 col-md-3 my-2">
                                        <h4>{{items.value.price}}</h4>
                                    </div>
                                </div>
                            </div>
                        }
                        <div class="d-flex justify-content-end">
                            <button type="button" class="btn btn-primary mt-3 px-3 me-2" (click)="addNewItem()">Add more items</button>
                            <button type="button" class="btn btn-danger mt-3 px-3" (click)="removeItems()">Remove items</button>
                        </div>
                    </div>
                        <div class="row">
                            <mat-radio-group formControlName="payment" aria-label="Select payment mode">
                                <label>Payment mode: </label>
                                <mat-radio-button value="online">Cheque/Card/UPI</mat-radio-button>
                                <mat-radio-button value="cash">Cash</mat-radio-button>
                            </mat-radio-group>
                            <div class="row">
                                <div class="col-sm-6 col-md-3 my-2">
                                    <input type="number" class="form-control" id="urd" formControlName="URD" placeholder="Lesss URD"/>
                                </div>
                                <div class="col-sm-6 col-md-3 my-2">
                                    <input type="number" class="form-control" id="discount" formControlName="Discount" placeholder="Discount"/>
                                </div>
                                <div>
                                    <label for="finalPrice">Total Price: </label>
                                </div>
                            </div>
                        </div>
                        <div class="d-flex justify-content-end">
                            <button type="submit" class="btn btn-primary mt-3 px-5">Next</button>
                        </div>
                </form>
            </div>
        </mat-expansion-panel>
    </mat-accordion>
</div>
